!function(t){function i(i,e){this.el=t(i),this.options=e||{},this.x=!1!==this.options.x,this.y=!1!==this.options.y,this.padding=void 0==this.options.padding?2:this.options.padding,this.inner=this.el.find(".antiscroll-inner"),this.inner.css({width:"+="+o(),height:"+="+o()}),this.refresh()}function e(i){this.pane=i,this.pane.el.append(this.el),this.innerEl=this.pane.inner.get(0),this.dragging=!1,this.enter=!1,this.shown=!1,this.pane.el.mouseenter(t.proxy(this,"mouseenter")),this.pane.el.mouseleave(t.proxy(this,"mouseleave")),this.el.mousedown(t.proxy(this,"mousedown")),this.pane.inner.scroll(t.proxy(this,"scroll")),this.pane.inner.bind("mousewheel",t.proxy(this,"mousewheel"));var e=this.pane.options.initialDisplay;e!==!1&&(this.show(),this.hiding=setTimeout(t.proxy(this,"hide"),parseInt(e,10)||3e3))}function s(t,i){function e(){}e.prototype=i.prototype,t.prototype=new e}function o(){if(void 0===n){var i=t('<div style="width:50px;height:50px;overflow:hidden;position:absolute;top:-200px;left:-200px;"><div style="height:100px;"></div>');t("body").append(i);var e=t("div",i).innerWidth();i.css("overflow-y","scroll");var s=t("div",i).innerWidth();t(i).remove(),n=e-s}return n}t.fn.antiscroll=function(i){return this.each(function(){t(this).data("antiscroll")&&t(this).data("antiscroll").destroy(),t(this).data("antiscroll",new t.Antiscroll(this,i))})},t.Antiscroll=i,i.prototype.refresh=function(){var t=this.inner.get(0).scrollWidth>this.el.width(),i=this.inner.get(0).scrollHeight>this.el.height();!this.horizontal&&t&&this.x?this.horizontal=new e.Horizontal(this):this.horizontal&&!t&&(this.horizontal.destroy(),this.horizontal=null),!this.vertical&&i&&this.y?this.vertical=new e.Vertical(this):this.vertical&&!i&&(this.vertical.destroy(),this.vertical=null)},i.prototype.destroy=function(){return this.horizontal&&this.horizontal.destroy(),this.vertical&&this.vertical.destroy(),this},i.prototype.rebuild=function(){return this.destroy(),this.inner.attr("style",""),i.call(this,this.el,this.options),this},e.prototype.destroy=function(){return this.el.remove(),this},e.prototype.mouseenter=function(){this.enter=!0,this.show()},e.prototype.mouseleave=function(){this.enter=!1,this.dragging||this.hide()},e.prototype.scroll=function(){this.shown||(this.show(),this.enter||this.dragging||(this.hiding=setTimeout(t.proxy(this,"hide"),1500))),this.update()},e.prototype.mousedown=function(i){i.preventDefault(),this.dragging=!0,this.startPageY=i.pageY-parseInt(this.el.css("top"),10),this.startPageX=i.pageX-parseInt(this.el.css("left"),10),document.onselectstart=function(){return!1};var e=(this.pane,t.proxy(this,"mousemove")),s=this;t(document).mousemove(e).mouseup(function(){s.dragging=!1,document.onselectstart=null,t(document).unbind("mousemove",e),s.enter||s.hide()})},e.prototype.show=function(){this.shown||(this.update(),this.el.addClass("antiscroll-scrollbar-shown"),this.hiding&&(clearTimeout(this.hiding),this.hiding=null),this.shown=!0)},e.prototype.hide=function(){this.shown&&(this.el.removeClass("antiscroll-scrollbar-shown"),this.shown=!1)},e.Horizontal=function(i){this.el=t('<div class="antiscroll-scrollbar antiscroll-scrollbar-horizontal">'),e.call(this,i)},s(e.Horizontal,e),e.Horizontal.prototype.update=function(){var t=this.pane.el.width(),i=t-2*this.pane.padding,e=this.pane.inner.get(0);this.el.css("width",i*t/e.scrollWidth).css("left",i*e.scrollLeft/e.scrollWidth)},e.Horizontal.prototype.mousemove=function(t){var i=this.pane.el.width()-2*this.pane.padding,e=t.pageX-this.startPageX,s=this.el.width(),o=this.pane.inner.get(0),n=Math.min(Math.max(e,0),i-s);o.scrollLeft=(o.scrollWidth-this.pane.el.width())*n/(i-s)},e.Horizontal.prototype.mousewheel=function(t,i,e){return 0>e&&0==this.pane.inner.get(0).scrollLeft||e>0&&this.innerEl.scrollLeft+this.pane.el.width()==this.innerEl.scrollWidth?(t.preventDefault(),!1):void 0},e.Vertical=function(i){this.el=t('<div class="antiscroll-scrollbar antiscroll-scrollbar-vertical">'),e.call(this,i)},s(e.Vertical,e),e.Vertical.prototype.update=function(){var t=this.pane.el.height(),i=t-2*this.pane.padding,e=this.innerEl;this.el.css("height",i*t/e.scrollHeight).css("top",i*e.scrollTop/e.scrollHeight)},e.Vertical.prototype.mousemove=function(t){var i=this.pane.el.height(),e=i-2*this.pane.padding,s=t.pageY-this.startPageY,o=this.el.height(),n=this.innerEl,h=Math.min(Math.max(s,0),e-o);n.scrollTop=(n.scrollHeight-i)*h/(e-o)},e.Vertical.prototype.mousewheel=function(t,i,e,s){return s>0&&0==this.innerEl.scrollTop||0>s&&this.innerEl.scrollTop+this.pane.el.height()==this.innerEl.scrollHeight?(t.preventDefault(),!1):void 0};var n}(jQuery);